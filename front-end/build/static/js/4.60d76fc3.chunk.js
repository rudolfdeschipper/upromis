(this.webpackJsonpupromisfrontend=this.webpackJsonpupromisfrontend||[]).push([[4],{118:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(21),r=a(22),o=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,null,[{key:"formatDate",value:function(e){if(null==e||"undefined"===e)return"";var t=new Date(e);return t.getDate().toString()+"/"+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]+"/"+t.getFullYear().toString()}},{key:"formatDateForEdit",value:function(e){var t=new Date(e);return t.getFullYear().toString()+"/"+(t.getMonth()+1).toString()+"/"+t.getDate().toString()}},{key:"formatAmount",value:function(e){for(var t=e.toFixed(2),a=0|t,n=e<0?1:0,r=(""+Math.abs(t-a).toFixed(2)).substr(2,2),o=""+a,i=o.length,c="";(i-=3)>n;)c=","+o.substr(i,3)+c;return"\u20ac "+o.substr(0,i+3)+c+(r?"."+r:"")}},{key:"dateSorter",value:function(e,t,a){e=null===e||void 0===e?-1/0:e,t=null===t||void 0===t?-1/0:t;var n=new Date(e),r=new Date(t);return n>r?a?-1:1:n<r?a?1:-1:0}}]),e}()},167:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(21),r=a(118),o=function e(){Object(n.a)(this,e)};o.loadList=function(e){return fetch("http://localhost:5001/api/home/getcontractdata",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({page:e.page,pageSize:e.pageSize,sorted:e.sorted,filtered:e.filtered})}).then((function(e){return e.json()}))},o.loadListForExport=function(e,t){return fetch("http://localhost:5001/api/home/getcontractdataexport",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({page:1,pageSize:t.pageSize,sorted:t.sorted,filtered:t.filtered})}).then((function(t){t.blob().then((function(t){var a=window.URL.createObjectURL(t),n=document.createElement("a"),o=e+" - "+r.a.formatDate(Date.now()).replace(/\//g,"-")+".xlsx";n.href=a,n.download=o,n.click(),n.remove()}))})).catch((function(e){return console.error(e)}))},o.saveRecord=function(e){return fetch("http://localhost:5001/api/home/postonecontractdata",{method:e.action,headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({id:e.id,dataSubject:e.dataSubject,action:e.action,subaction:e.subaction,additionalData:e.additionalData})}).then((function(e){return e.json()}))},o.loadOneRecord=function(e){return fetch("http://localhost:5001/api/home/getonecontractdata",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({ID:e})}).then((function(e){return e.json()}))},o.loadDropdownValues=function(e){return fetch("http://localhost:5001/api/home/getselectvalues",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({valueType:e})}).then((function(e){return e.json()}))}},433:function(e,t,a){"use strict";a.r(t);var n=a(169),r=a(21),o=a(22),i=a(23),c=a(24),l=a(1),s=a.n(l),d=a(231),u=(a(171),a(118)),m=a(63),p=a(64),f=a(136),h=a(139),b=a(168),g=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={isSubmitting:!1},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement(f.b,{initialValues:this.props.currentData,enableReinitialize:!0,validationSchema:h.object({code:h.string().max(15,"Must be 15 characters or less").required("Required"),title:h.string().max(100,"Must be 100 characters or less").required("Required"),description:h.string().required("Required"),startdate:h.date().required("Required"),enddate:h.date().required("Required"),status:h.string().required("Required").oneOf(["Planned","Open","Closed"]),value:h.number().required("Required")}),onSubmit:function(t,a){var n=a.setSubmitting;e.props.saveAction("Delete",t),n(!1)}},s.a.createElement(b.b,{mode:"themed"},s.a.createElement(b.c,{name:"id",label:"ID",disabled:!0}),s.a.createElement(b.c,{name:"code",label:"Code",disabled:!0}),s.a.createElement(b.c,{name:"title",label:"Title",disabled:!0}),s.a.createElement(b.f,{name:"description",label:"Description",disabled:!0}),s.a.createElement("div",{className:"w3-cell-row"},s.a.createElement("div",{className:"w3-cell"},s.a.createElement(b.a,{name:"startdate",label:"Start/End date",disabled:!0})),s.a.createElement("div",{className:"w3-cell"},s.a.createElement(b.a,{name:"enddate",disabled:!0}))),s.a.createElement(b.c,{name:"status",label:"Status",disabled:!0}),s.a.createElement(b.c,{name:"value",type:"number",label:"Value",step:"0.01",disabled:!0}),s.a.createElement("hr",null),s.a.createElement(b.e,{className:"w3-button w3-light-grey w3-round",title:this.props.buttonText+"s this record",disabled:this.state.isSubmitting},s.a.createElement("i",{className:"fa fa-save"}),"\xa0",this.props.buttonText)))}}]),a}(s.a.Component),v=a(167),E=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).openDeleteModal=function(e){o.setState({modalDeleteIsOpen:!0,currentRecord:Object(n.a)({},o.state.data[e.row._index],{modifier:"Deleted"})})},o.closeDeleteModalNoSave=function(){o.setState({modalDeleteIsOpen:!1,currentRecord:null})},o.closeDeleteModalWithSave=function(e,t){o.saveOneRecord(e,t).then((function(){return o.setState({modalDeleteIsOpen:!1,currentRecord:null})})).catch((function(e){return alert(e)}))},o.saveOneRecord=function(e,t){var a="Added"===t.modifier?"POST":"Deleted"===t.modifier?"DELETE":"PUT",r={id:t.id,action:a,dataSubject:Object(n.a)({},t),subaction:e,additionalData:[]};return v.a.saveRecord(r).then((function(e){e.success?(o.setState(Object(n.a)({},o.state,{currentRecord:e.dataSubject})),alert(e.message)):alert("Save failed")}))},o.loadData=function(e){o.setState({loading:!0}),v.a.loadList({page:e.page,pageSize:e.pageSize,sorted:e.sorted,filtered:e.filtered}).then((function(t){o.setState({data:t.data,pages:t.pages,currentFilter:e.filtered,currentSort:e.sorted,message:t.message?t.message:o.state.message})})).catch((function(e){return console.error(e)})).finally((function(){return o.setState({loading:!1})}))},o.downloadToExcel=function(){v.a.loadListForExport("Contract data",{page:1,pageSize:o.state.pageSize,sorted:o.state.currentSort,filtered:o.state.currentFilter})},o.performAction1=function(e){o.saveOneRecord("Action 1",o.state.data[e.row._index])},o.state={data:[],loading:!1,pages:-1,currentSort:null,currentFilter:null,pageSize:10,message:"",modalDeleteIsOpen:!1,currentRecord:null},o}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=[{Header:"Actions",Cell:function(t){return s.a.createElement("div",{className:"w3-bar"},s.a.createElement(m.b,{to:"/contractdetails/"+t.row.id,className:"w3-bar-item w3-button",title:"Edit"},s.a.createElement("i",{className:"fa fa-pencil"})),s.a.createElement("button",{onClick:function(){e.openDeleteModal(t)},className:"w3-bar-item w3-button",title:"Delete"},s.a.createElement("i",{className:"fa fa-trash-o"})),s.a.createElement("div",{className:"w3-dropdown-hover"},s.a.createElement("button",{className:"w3-button",title:"More actions..."},"..."),s.a.createElement("div",{className:"w3-dropdown-content w3-bar-block w3-card-4"},s.a.createElement("a",{onClick:function(){e.performAction1(t)},className:"w3-bar-item w3-button"},"Action 1"),s.a.createElement("a",{href:"#",className:"w3-bar-item w3-button"},"Link 2"),s.a.createElement("a",{href:"#",className:"w3-bar-item w3-button"},"Link 3"))))},sortable:!1},{Header:"ID",accessor:"id",show:!1},{Header:"Code",accessor:"code"},{Header:"Title",accessor:"title"},{Header:"Status",accessor:"status"},{Header:"Description",accessor:"description"},{id:"value",Header:"Value",accessor:function(e){return u.a.formatAmount(e.value)},style:{textAlign:"right"}},{id:"startdate",Header:"Start date",accessor:function(e){return u.a.formatDate(e.startdate)},sortMethod:u.a.dateSorter},{id:"enddate",Header:"End date",accessor:function(e){return u.a.formatDate(e.enddate)},sortMethod:u.a.dateSorter}];return s.a.createElement("div",{className:"upromisContent"},s.a.createElement(m.b,{className:"w3-button w3-light-grey w3-round",title:"Add new record",to:"/contractdetails/add"},s.a.createElement("i",{className:"fa fa-plus-circle"}),"\xa0Add new"),s.a.createElement(d.a,{className:"-striped",data:this.state.data,pages:this.state.pages,loading:this.state.loading,manual:!0,filterable:!0,minRows:1,onFetchData:this.loadData,columns:t}),s.a.createElement("p",null),s.a.createElement("button",{className:"w3-button w3-light-grey w3-round",onClick:this.downloadToExcel,title:"Export to Excel"},s.a.createElement("i",{className:"fa fa-file-excel-o"}),"\xa0Export"),s.a.createElement(p.b,{isOpen:this.state.modalDeleteIsOpen},s.a.createElement(p.d,{toggle:this.closeDeleteModalNoSave,charCode:"\xd7"},"Delete Contract"),s.a.createElement(p.c,null,s.a.createElement(g,{buttonText:"Delete",currentData:this.state.currentRecord,saveAction:this.closeDeleteModalWithSave}))))}}]),a}(s.a.Component);E.displayName=E.name;t.default=E}}]);
//# sourceMappingURL=4.60d76fc3.chunk.js.map